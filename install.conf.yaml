- defaults:
    link:
      create: true
      relink: true
      force: true

- clean: ['~', '~/.config', '~/.local/share']

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  - 
    command: pikaur -Sy --needed --noedit --noconfirm $(cat packages.txt)
    stdin: true
    stdout: true
    stderr: true

- link:
    ~/.config/alacritty/alacritty.yml: alacritty/alacritty.yml
    ~/.config/dunst/dunstrc: dunst/dunstrc
    ~/.config/emptty: emptty/emptty
    ~/.config/emptty-custom-sessions/sway-custom.desktop: emptty/emptty-custom-sessions/sway-custom.desktop
    ~/.config/fontconfig/conf.d/20-defaults.conf: fontconfig/20-defaults.conf
    ~/.config/fusuma/config.yml: fusuma/config.yml
    ~/.config/gtk-3.0/settings.ini: gtk-3.0/settings.ini
    ~/.config/mpd/mpd.conf: mpd/mpd.conf
    ~/.config/nvim/init.vim: nvim/init.vim
    ~/.config/nvim/wiki2html.sh: nvim/wiki2html.sh
    ~/.local/share/nvim/site/autoload/plug.vim: nvim/vim-plug/plug.vim
    ~/.config/sway/background: sway/background
    ~/.config/sway/config: sway/config
    ~/.config/sway/scripts: sway/scripts
    ~/.config/sway/start: sway/start
    ~/.config/waybar/config: waybar/config
    ~/.config/waybar/style.css: waybar/style.css
    ~/.config/wofi/style.css: wofi/style.css
    ~/.env: shell/env
    ~/.profile: shell/profile
    ~/.icons/default: icons/default
    ~/.tmux.conf: tmux/tmux.conf
    ~/.zshrc: zsh/zshrc

- create:
    - ~/.mpd

- shell:
  - [firefox -CreateProfile default-release]
  - [cp -R firefox/chrome firefox/user.js ~/.mozilla/firefox/*.default*]
  - [nvim +PlugInstall +qa!]
  - [systemctl --user enable mpd.service]
  - [sudo cp systemd/logind.conf /etc/systemd/logind.conf]
  - [sudo systemctl enable geoclue.service emptty.service]
